{% extends 'main_app/base.html' %}
{% load static %}

{% block title %}
{{ experiment.title }}
{% endblock %}

{% block content %}
<div class="experiment-detail">

  <h2>{{ experiment.title }}</h2>
  <p>{{ experiment.description }}</p>

  {% if experiment.Simulation_Data %}
  <div class="simulation-container">
    <h3>Interactive Simulation</h3>
    <div class="simulation-frame">
      {{ experiment.Simulation_Data|safe }}
    </div>
  </div>
  {% endif %}

  <br>
  {% if experiment.video %}
  <div>
    <h3>Experiment Video</h3>
    <video width="850" controls>
      <source src="{% static experiment.video|cut:'main_app/static/' %}" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>
  {% endif %}

<br>
  <h3>Comments</h3>
  <ul>
    {% for comment in comments %}
    <li>
      <strong> {{ comment.user.username }} : </strong>
      {{ comment.content  }}
    </li>
        {% endfor %}
  </ul>

  {% if user.is_authenticated and not user_commented %}
  <form method="post" action="">
    {% csrf_token %}
    <textarea name="content" placeholder="Add a comment"></textarea>
    <button type="submit">Post Comment</button>
  </form>

  {% endif %}
</div>
{% endblock %}
